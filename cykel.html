<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <title></title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <main>
        <section class="single_bike">
            <img class="s_bike_img" src="" alt="">
            <h2 class="s_model"></h2>
            <p class="lang"></p>
            <p class="s_pris"></p>
        </section>
    </main>
    <script>
        //Søger i adresselinjen efter ordet "id" og sætter konstanten id lig med
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get("id");



        console.log(id);

        let bike;

        document.addEventListener("DOMContentLoaded", start);

        function start() {
            getJson();
        }

        async function getJson() {
            console.log("getJson");

            //Henter nu kun JSON data for den enkelte post jeg har klikket på
            const url = "http://viktorkjeldal.dk/kea/2sem/kogacenter_cph/wordpress/wp-json/wp/v2/cykel/" + id;
            const jsonData = await fetch(url);
            bike = await jsonData.json();

            console.log(bike);

            showBike();
        }

        function showBike() {
            document.querySelector("title").textContent = "E-bikes | " + bike.title.rendered;
            document.querySelector('meta[name="description"]').setAttribute("content", bike.meta_description);

            document.querySelector(".s_bike_img").src = bike.billede.guid;
            document.querySelector(".s_model").textContent = "KOGA " + bike.model;
            document.querySelector(".lang").textContent = bike.lang;
            document.querySelector(".s_pris").textContent = "Pris: " + bike.pris + " DKK";

        }

    </script>
</body>

</html>
