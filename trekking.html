<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kogacenter | Trekking</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header></header>
    <main>
        <section class="bikes">
        </section>
    </main>

    <template>
        <article class="bike">
            <img class="bike_img" src="" alt="">
            <h2 class="model"></h2>
            <p class="kort"></p>
            <p class="pris"></p>
        </article>
    </template>
    <script>
        //Definerer variablen hvor alle vores posts kommer ind i et array
        let bikes = [];

        //Definerer destinationen hvor hver article skal sættes ind
        const dest = document.querySelector(".bikes");

        //Definerer templaten hvor som hver øl post skal følge
        const temp = document.querySelector("template");

        document.addEventListener("DOMContentLoaded", start);

        function start() {
            getJson();
        }

        async function getJson() {
            console.log("getJson");

            const url = "http://viktorkjeldal.dk/kea/2sem/kogacenter_cph/wordpress/wp-json/wp/v2/cykel";

            //Henter data i filen som er defineret ovenfor
            const jsonData = await fetch(url);

            //Indsætter dataen i mit array
            bikes = await jsonData.json();

            console.log(bikes);
            showBikes();
        }

        function showBikes() {
            console.log("SHOWBIKES");
            //For hvert array objekt skriver jeg dataen ind i en template
            bikes.forEach(bike => {
                if (bike.kategori == "Trekking") {
                    const klon = temp.cloneNode(true).content;

                    klon.querySelector(".bike_img").src = bike.billede.guid;
                    klon.querySelector(".bike_img").alt = bike.alt_tag;
                    klon.querySelector(".model").textContent = bike.model;
                    klon.querySelector(".kort").textContent = bike.kort;
                    klon.querySelector(".pris").textContent = bike.pris + " DKK";

                    //Giver hver klon en eventlistener, så jeg kan klikke og åbne singleview på hver af dem
                    //De bliver sendt videre med deres ID, som er defineret i JSON filen
                    klon.querySelector(".bike").addEventListener("click", () => {
                        location.href = `cykel.html?id=${bike.id}`;
                    })

                    //Skriver klonen ud i destinationen, når den er udfyldt, og kører så loopet igen
                    dest.appendChild(klon);
                }
            })
        }

    </script>


    <footer>
        <div>
            <h2>Åbningstider</h2>
            <p>Man-fre 11:00-18:00 <br>Lør 09:00-14:00</p>
        </div>
        <div>
            <h2>Kontakt</h2>
            <p>+45 38 86 43 25 <br>
                info@kogacenter.dk <br>
                Peter Bangs Vej 18 <br>
                2000 Frederiksberg</p>
        </div>
        <div>
            <h2>Kategorier</h2>
            <p>E-bikes <br>
                City &amp; Touring <br>
                Trekking <br>
                Race <br>
                Byg selv </p>
        </div>
        <div>
            <h2>Service</h2>
            <p>FAQ <br>
                Garanti <br>
                Services <br>
                Rentefri betaling </p>
        </div>
        <div class="om">
            <h2>Om os</h2>
            <p>Koga Centeret <br>
                Hvorfor Koga <br>
                Jonas Larsson </p>
        </div>

    </footer>
    <script src="main.js"></script>
</body>

</html>
